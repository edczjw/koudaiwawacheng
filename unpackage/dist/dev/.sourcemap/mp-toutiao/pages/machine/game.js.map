{"version":3,"sources":["uni-app:///main.js","webpack:////Users/cengjunwei/Desktop/uniwwj/pages/machine/game.vue?69c0","webpack:////Users/cengjunwei/Desktop/uniwwj/pages/machine/game.vue?235f","webpack:////Users/cengjunwei/Desktop/uniwwj/pages/machine/game.vue?2210","webpack:////Users/cengjunwei/Desktop/uniwwj/pages/machine/game.vue?8f37","uni-app:///pages/machine/game.vue","webpack:////Users/cengjunwei/Desktop/uniwwj/pages/machine/game.vue?76ea","webpack:////Users/cengjunwei/Desktop/uniwwj/pages/machine/game.vue?d85d"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","controllPanelIndex","navItems","id","name","active","utils","machineId","status","player","viewers","subscribers","subscribeOpen","faces","collect","catchRecords","countdownTime","isSubscribe","subscribeSort","exchangeJifen","userNotice","video","videoPlayer","showInmachineAnimation","operToken","operUrl","lastCmd","playbtnType","doll","thumbnail","detailImgs","coin","imgs","showType","watch","handler","newViewers","newSubscribers","onReady","updated","cv","onLoad","onHide","onShow","uni","onUnload","methods","addListenerSocketSloginsuccess","startVideo","stopVideo","videoPostMessage","listener","clearListener","closeResultPopup","popGameResult","play","title","icon","url","setTimeout","opera","cmd","cancalSubribe","navChange","navTo","getCatchSuccessRecent","getUserNotice","complaint","loadMachine","res","leaveRoom","console","collectMachine","clearInterval","setInterval","backgroundVoice","backgroundVoiceStop","btnVoice","caozuodianjiVoice","xiazhuaVoice","readygoVoice","gameSuccessVoice","gameFailVoice","daoninleVoice","changeVolume","setPlayVideoInterval","i","clearPlayVideoInterval"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,wLAEN;AACP,KAAK;AACL;AACA,aAAa,+NAEN;AACP,KAAK;AACL;AACA,aAAa,2LAEN;AACP,KAAK;AACL;AACA,aAAa,2LAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvIA;AAAA;AAAA;AAAA;AAAmzB,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC+Pv0B;AACA;AAAA;AAAA;AACA,cAAc,mBAAO,CAAC,iCAAwB;AAA9C,eACA;EACAC;IACA;MACAC;MACA;MACAC;QAAAC;QAAAC;MAAA;QAAAD;QAAAC;MAAA;QAAAD;QAAAC;MAAA;MACAC;MACAC;MACAC;MACAH;MACAI;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;QACAzB;QACAC;QACAyB;QACAC;QACAC;QACAC;MACA;MACAC;IACA;EACA;EACAC;IACAxB;MACAyB;QAAA;QACA;UACA;YACAC;UACA;UACA;UACAA;YACA;UACA;QACA;MACA;IACA;IACA3B;MAAA0B;IAAA;IACAxB;MACAwB;QAAA;QACA;QACA;QACA;UACAE;YACA;cACAnB;cACAD;YACA;UACA;QACA;QACA;QACA;MACA;IACA;IACAT;MACA2B;QACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;EACAG;IACA;IACA;AACA;AACA;EAFA,CAGA;EAEAC;IAAA;IACA;MACA;MACA;MACA;MACA;MACAC;MACAA;MACA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;MAEA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;IACA;EACA;EACAC;IACA;IACA;IACA;;IAEA;IAEA;IACA;IACA;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACA;IACA;MACAC;IACA;IACA;IACA;IACA;EACA;EACAC;IACA;IACA;IACA;;IAEA;IACA;EACA;EACAC,yCACA;IACAC;MAAA;MACAH;QACA;QACA;QACA;QACA;MACA;IACA;IACAI;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA,EADA;IAAA;;IAEAC;MACA;MACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACAP;QACA;QACA;UACA;QACA;MACA;;MAEA;MACAA;QACA;QACA;UACA;UACA;UACA;UAEA;YACA;YACA;YACA;UACA;QACA;MACA;;MAEA;MACAA;QACA;QACA;UACA;YACA;cACA;YACA;cACA;YACA;YAEA;UACA;UACA;QACA;MACA;;MAEA;MACA;AACA;AACA;;MAEA;MACA;AACA;AACA;IACA;;IACAQ;MACAR;MACAA;MACAA;MACAA;MACAA;MACA;IACA;IACAS;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;QACA;UACA;QACA;UACA;UACA;QACA;MACA;MACA;IACA;IACAC;MAAA;MAEA;QACA;MACA;MAEA;QACA;QACA;QACA;MACA;MAEA;QACA;QACAX;UACA;QACA;UACA;YACAA;cACAY;cACAC;YACA;UACA;UACA;YACA;YAEA;cACA;cACA;YACA;YACA;YACA;YACA;YACA;YACA;UACA;YACAb;cACAc;YACA;UACA;YACAC;cACAf;gBACAc;cACA;YACA;UACA;UAAA,CACA;UAAA;QAEA;MACA;IACA;IACAE;MAAA;MACA;QACA;MACA;MAEA;QACA;UACAhB;YACAY;YACAC;UACA;UACA;QACA;UACA;UACA;QACA;MACA;MAEA;QACA;MACA;MACA;QACA;QACA;QACAb;UACAiB;UACArC;QACA;UACA;YACA;YAEA;cACA;cACA;YACA;UACA;YACAoB;cACAY;cACAC;YACA;UACA;QACA,yBACA;;QAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;IACA;IACAK;MACA;QACA;QACAlB;UACA;QACA;UACA;YACAA;cACAY;cACAC;YACA;UACA;QACA;MACA;IACA;IACA;IACAM;MACA;MACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACApB;QACAc;MACA;IACA;IACAO;MAAA;MACArB,aACA,yDACA;QACA;MACA;IACA;IACAsB;MAAA;MACAtB,aACA,YACA;QACA;UACA;QACA;MACA;;MAEA;AACA;AACA;AACA;AACA;IACA;IACAuB;MACA;MACAvB,aACA,kDACA;QACA;UACAA;YACAc;UACA;QACA;UACAd;YACAc;UACA;QACA;MACA;IACA;IACAU;MAAA;MACA;AACA;AACA;AACA;AACA;AACA;MACA;QACA7D;MACA;QACA;QACA;MACA;MAEA;QACA;MACA;MACA;QACAqC;UACA;QACA;UACA;YACA;YACA;cACA;YACA;;YAEA;YACA;;YAGA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YAGA;YACAA;cACAY;YACA;YAEA;cACAa;YACA;YAEA;cACA;cACA;cACA;cACA;cAEA;YACA;YAEA;cACA;YACA;YACA;cACAzB;cACA;YACA;UACA;YACAA;cACAY;cACAC;YACA;YACAE;cACAf;gBACAc;cACA;YACA;UACA;QACA;MACA;IACA;IACAY;MACA;QACA1B;UACA;QACA;UACA2B;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA5B,aACA,kDACA;QACA;QACAA;UACAY;UACAC;QACA;MACA;IACA;IACAgB;MAAA;QAAA;MAAA;MAAA;QAAA;MAAA;MAAA;IAAA;MACA;QACAA;QACA;MACA;IACA;IACAC;MAAA;QAAA;MAAA;MAAA;QAAA;MAAA;MAAA;IAAA;MAAA;MACA;MACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAC;MAAA;QAAA;MAAA;MAAA;QAAA;MAAA;MAAA;IAAA;MACA;QACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;QACA;;QAEAA;MACA;IACA;IACAC;MAAA;QAAA;MAAA;MAAA;QAAA;MAAA;MAAA;IAAA;MACA;AACA;AACA;MACA;MACAA;IACA;IACAC;MACA;QACA;QACAC;MACA;IACA;IACAC;MAAA;QAAA;MAAA;MAAA;QAAA;MAAA;MAAA;IAAA;MACA;QACA;QACAA;MACA;IACA;IACAC;MAAA;QAAA;MAAA;MAAA;QAAA;MAAA;MAAA;IAAA;MACA;QACA;QACAA;MACA;IACA;IACAC;MAAA;QAAA;MAAA;MAAA;QAAA;MAAA;MAAA;IAAA;MACA;QACA;QACAA;MACA;IACA;IACAC;MAAA;QAAA;MAAA;MAAA;QAAA;MAAA;MAAA;IAAA;MACA;QACA;QACAA;MACA;IACA;IACAC;MAAA;QAAA;MAAA;MAAA;QAAA;MAAA;MAAA;IAAA;MACA;QACA;QACAA;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;QACAT;MACA;QACA;QACA;QACAC;MACA;IACA;IACAS;MAAA;MACA;QACA;QAEA;QACA;UACAC;UAEA;UACA;UACA;UAEA;YACA;UACA;QACA;MACA;QACAf;MACA;IAEA;IACAgB;MACA;QACAd;QACA;MACA;IACA;EAAA;AAEA;AAAA,2B;;;;;;;;;;;;;ACr5BA;AAAA;AAAA;AAAA;AAA0pC,CAAgB,+lCAAG,EAAC,C;;;;;;;;;;;ACA9qC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/machine/game.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/machine/game.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./game.vue?vue&type=template&id=601fd69a&\"\nvar renderjs\nimport script from \"./game.vue?vue&type=script&lang=js&\"\nexport * from \"./game.vue?vue&type=script&lang=js&\"\nimport style0 from \"./game.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/machine/game.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./game.vue?vue&type=template&id=601fd69a&\"","var components\ntry {\n  components = {\n    guiPage: function () {\n      return import(\n        /* webpackChunkName: \"GraceUI5/components/gui-page\" */ \"@/GraceUI5/components/gui-page.vue\"\n      )\n    },\n    guiSwitchNavigation: function () {\n      return import(\n        /* webpackChunkName: \"GraceUI5/components/gui-switch-navigation\" */ \"@/GraceUI5/components/gui-switch-navigation.vue\"\n      )\n    },\n    guiPopup: function () {\n      return import(\n        /* webpackChunkName: \"GraceUI5/components/gui-popup\" */ \"@/GraceUI5/components/gui-popup.vue\"\n      )\n    },\n    guiImage: function () {\n      return import(\n        /* webpackChunkName: \"GraceUI5/components/gui-image\" */ \"@/GraceUI5/components/gui-image.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    _vm.player && _vm.player.userName\n      ? _vm.utils.formatImg(_vm.player.icon)\n      : null\n  var g1 = _vm.active == 0 ? _vm.utils.formatImg(_vm.doll.thumbnail) : null\n  var l0 =\n    _vm.active == 0\n      ? _vm.__map(_vm.doll.imgs, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g2 = _vm.utils.formatImg(item)\n          return {\n            $orig: $orig,\n            g2: g2,\n          }\n        })\n      : null\n  var l1 =\n    _vm.active == 1\n      ? _vm.__map(_vm.catchRecords, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g3 = _vm.utils.formatImg(item.userIcon)\n          return {\n            $orig: $orig,\n            g3: g3,\n          }\n        })\n      : null\n  var g4 = _vm.showType == 1 ? _vm.utils.formatImg(_vm.doll.thumbnail) : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event, item) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item\n      var _temp, _temp2\n      _vm.navTo(\n        \"/pages/user/recentCatch?user=\" +\n          encodeURIComponent(JSON.stringify(item))\n      )\n    }\n    _vm.e1 = function ($event, item) {\n      var _temp3 = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp4 = _temp3.eventParams || _temp3[\"event-params\"],\n        item = _temp4.item\n      var _temp3, _temp4\n      _vm.navTo(\n        \"/pages/user/recentCatch?user=\" +\n          encodeURIComponent(JSON.stringify(item))\n      )\n    }\n    _vm.e2 = function ($event, item) {\n      var _temp5 = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp6 = _temp5.eventParams || _temp5[\"event-params\"],\n        item = _temp6.item\n      var _temp5, _temp6\n      _vm.navTo(\n        \"/pages/user/recentCatch?user=\" +\n          encodeURIComponent(JSON.stringify(item))\n      )\n    }\n    _vm.e3 = function ($event) {\n      $event.stopPropagation()\n      _vm.closeResultPopup()\n      _vm.cancalSubribe()\n    }\n    _vm.e4 = function ($event) {\n      $event.stopPropagation()\n      _vm.closeResultPopup()\n      _vm.cancalSubribe()\n    }\n    _vm.e5 = function ($event) {\n      $event.stopPropagation()\n      _vm.closeResultPopup()\n      _vm.cancalSubribe()\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        l0: l0,\n        l1: l1,\n        g4: g4,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./game.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./game.vue?vue&type=script&lang=js&\"","<template>\r\n\t<gui-page \r\n\t\t:footerSets=\"{height:100, zIndex:100, bg:'linear-gradient(to bottom, #F8F8F8,#F8F8F8)'}\">\r\n\t\t<!-- 自定义头部导航 -->\r\n\t\t<!-- <view slot=\"gHeader\">\r\n\t\t\t<view class=\"gui-flex gui-nowrap gui-rows gui-align-items-center gui-padding\">\r\n\t\t\t\t<gui-header-leading :onlyBack=\"true\"></gui-header-leading>\r\n\t\t\t\t<text class=\"gui-block-text gui-text gui-ellipsis gui-text-left gui-header-content gui-primary-color game-title\">{{doll.name}}{{$store.state.screenHeight}}</text>\r\n\t\t\t\t<view v-if=\"player && player.userName\" class=\"gui-flex gui-rows gui-nowrap gui-list-items\">\r\n\t\t\t\t\t<image class=\"\" src=\"../../static/gif/playing.gif\" style=\"width: 40rpx;height: 40rpx;\"></image>\r\n\t\t\t\t\t<view class=\"gui-relative\">\r\n\t\t\t\t\t\t<image class=\"\" style=\"width: 60rpx;height: 50rpx;border-radius: 50rpx;\"\r\n\t\t\t\t\t\t:src=\"utils.formatImg(player.icon)\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view style=\"margin-left: 10rpx;\">\r\n\t\t\t\t\t\t<view class=\"gui-list-title\" style=\"margin-bottom: -15rpx;\">\r\n\t\t\t\t\t\t\t<text class=\"gui-list-title-text gui-color-gray\" style=\"font-size: 22rpx;\">{{player.nick}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text class=\"gui-list-body-desc gui-color-gray gui-block-text\" style=\"font-size: 20rpx;\">游戏中</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view> -->\r\n\r\n\t\t<!-- 页面主体 -->\r\n\t\t<view slot=\"gBody\" style=\"margin: 15rpx;\">\r\n\t\t\t<view class=\"game-body\" style=\"margin: 15rpx;\">\r\n\t\t\t\t<view :style=\"{ height: $store.state.screenHeight * 0.68 + 'rpx', 'z-index': 98}\" ref=\"videoView\" class=\"videoView\">\r\n\t\t\t\t\t<!-- <view style=\"width:690rpx;height:100%;z-index: 9999;position: absolute;\"></view> -->\r\n\t\t\t\t\t<view :style=\"{ width:'690rpx',height: $store.state.screenHeight * 0.68 + 'rpx',position : 'absolute', 'z-index': 99}\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"game-roomname\" :style=\"{top: ($store.state.screenHeight * 0.68 - 45) + 'rpx'}\">\r\n\t\t\t\t<text class=\"game-roomname-text\">房间号:{{name}}</text>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"game-player\" v-if=\"player && player.userName\">\r\n\t\t\t\t<view class=\"gui-flex gui-rows gui-nowrap\">\r\n\t\t\t\t\t<image :src=\"utils.formatImg(player.icon)\" class=\"game-player-item\"></image>\r\n\t\t\t\t\t<view class=\"text-box gui-color-white gui-bg-black-opacity5\" style=\"height: 80rpx;width: 150rpx;margin-left: -40rpx;border-radius: 30rpx;\" scroll-y=\"true\" >\r\n\t\t\t\t\t\t<text style=\"margin-left: 45rpx;font-size: small;\">{{player.nick}}\\n</text>\r\n\t\t\t\t\t\t<text style=\"margin-left: 45rpx;font-size: small;\">游戏中</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- <text style=\"margin-left: 0rpx;height: 80rpx;line-height: 80rpx;\" class=\"gui-badge gui-bg-black-opacity7 gui-color-white\">aaac\\n游戏中</text> -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"game-viewer\">\r\n\t\t\t\t<view class=\"gui-flex gui-rows gui-nowrap\">\r\n\t\t\t\t\t<image v-for=\"(item,index) in faces\" :src=\"item\" class=\"game-viewer-item\"\r\n\t\t\t\t\t :style=\"{'margin-left': index == 0 ? '0rpx' : '-20rpx'}\"></image>\r\n\t\t\t\t\t<text v-if=\"viewers && viewers.length > 0\" style=\"margin-left: 0rpx;height: 60rpx;line-height: 60rpx;\" class=\"gui-badge gui-bg-black-opacity3 gui-color-white\">{{viewers.length}}人在房间</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"tool-bar\" :style=\"{top: $store.state.screenHeight * 0.15 + 'rpx', 'z-index': 999}\">\r\n\t\t\t\t<image class=\"tool-bar-item\" @tap=\"changeVolume\" :src=\"$store.state.gameSet.volume ? '../../static/imgs/volume-up.png' : '../../static/imgs/volume-off.png'\"></image>\r\n\t\t\t\t<image class=\"tool-bar-item\" @tap=\"complaint\" src=\"../../static/imgs/shensu.png\"></image>\r\n\t\t\t\t<image class=\"tool-bar-item\" style=\"margin-top: 50rpx;\" @tap=\"loadMachine(-1 * machineId)\" src=\"../../static/imgs/exchange.png\"></image>\r\n\t\t\t</view>\r\n\t\t\t<!-- <button @click=\"tankuang\">测试弹框</button> -->\r\n\t\t\t<swiper class=\"gui-bg-gray\" :current=\"controllPanelIndex\" disable-touch=true style=\"height: 240rpx;\">\r\n\t\t\t\t<swiper-item>\r\n\t\t\t\t\t<!-- 控制面板 -->\r\n\t\t\t\t\t<view :style=\"{'margin-top': '60rpx'}\"\r\n\t\t\t\t\t\tclass=\"gui-flex gui-rows gui-wrap gui-space-between\">\r\n\t\t\t\t\t\t\t<view class=\"demo gui-button gui-noborder game-collectbtn-border\" @tap=\"collectMachine()\">\r\n\t\t\t\t\t\t\t\t <view class=\"game-collectbtn-inner\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"gui-button-text gui-icons\" :style=\"{'font-size': '55rpx',color : (collect ? '#fc6a6a': 'gray')}\">&#xe605;</text>\r\n\t\t\t\t\t\t\t\t </view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view v-if=\"subscribeOpen\" class=\"game-playbtn-view\" @tap=\"play()\" hover-class=\"btn-hover\">\r\n\t\t\t\t\t\t\t\t<image class=\"game-playbtn-img\" :src=\"isSubscribe ? '../../static/imgs/game-yuyue-cancal.png' : ((!player || player.userName == $store.state.user.id) ? '../../static/imgs/game-play.png' : '../../static/imgs/game-yuyue.png')\"></image>\r\n\t\t\t\t\t\t\t\t<text class=\"game-playbtn-text\">{{(!isSubscribe && (!player || player.userName == $store.state.user.id)) ? (doll.coin + '金币/次') : ('前面' + subscribeSort + '人')}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view v-else class=\"game-playbtn-view\" @tap=\"play()\" hover-class=\"btn-hover\">\r\n\t\t\t\t\t\t\t\t<image class=\"game-playbtn-img\" :src=\"(!player || player.userName == $store.state.user.id) ? '../../static/imgs/game-play.png' : '../../static/imgs/gameing.png'\"></image>\r\n\t\t\t\t\t\t\t\t<text class=\"game-playbtn-text\">{{(!player || player.userName == $store.state.user.id) ? (doll.coin + '金币/次') : \"\"}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view class=\"demo gui-noborder game-coinbtn-border\" style=\"text-align: center;\" @tap=\"navTo('/pages/money/recharge')\">\r\n\t\t\t\t\t\t\t\t<text class=\"gui-color-gray my-icons game-coinbtn-text\">{{$store.state.user.coin}}币</text>\r\n\t\t\t\t\t\t\t\t<view type=\"default\" class=\" gui-bg-white gui-button-mini game-rechargebtn\" style=\"text-align: center;\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"my-icons gui-button-text-mini gui-color-orange game-rechargebtn-text\">&#xe60f;充币</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t</swiper-item>\r\n\t\t\t\t\r\n\t\t\t\t<swiper-item>\r\n\t\t\t\t\t<view :style=\"{'margin-left': '30rpx',opacity : status == 2 ? 0.4 : 1}\"\r\n\t\t\t\t\t\tclass=\"gui-flex gui-rows gui-nowrap\">\r\n\t\t\t\t\t\t<view class=\"game-control-view\">\r\n\t\t\t\t\t\t\t<view class=\"gui-grids gui-flex gui-rows gui-wrap\" style=\"margin-top: 10rpx;\">\r\n\t\t\t\t\t\t\t\t<view class=\"gui-grids-items gui-flex gui-columns gui-align-items-center\"></view>\r\n\t\t\t\t\t\t\t\t<view class=\"gui-grids-items gui-flex gui-columns gui-align-items-center\" @touchstart=\"opera(127)\" @touchend=\"opera(255)\" hover-class=\"btn-hover\">\r\n\t\t\t\t\t\t\t\t\t<image class=\"game-controlbtn-img preventLongpress\" src=\"../../static/imgs/rocker_up.png\"></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"gui-grids-items gui-flex gui-columns gui-align-items-center\"></view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"gui-grids gui-flex gui-rows gui-wrap gui-margin-top\" style=\"margin-top: -25rpx;\">\r\n\t\t\t\t\t\t\t\t<view class=\"gui-grids-items gui-flex gui-columns gui-align-items-center\" @touchstart=\"opera(223)\" @touchend=\"opera(255)\" hover-class=\"btn-hover\">\r\n\t\t\t\t\t\t\t\t\t<image class=\"game-controlbtn-img preventLongpress\" src=\"../../static/imgs/rocker_left.png\"></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"gui-grids-items gui-flex gui-columns gui-align-items-center\"></view>\r\n\t\t\t\t\t\t\t\t<view class=\"gui-grids-items gui-flex gui-columns gui-align-items-center\" @touchstart=\"opera(239)\" @touchend=\"opera(255)\" hover-class=\"btn-hover\">\r\n\t\t\t\t\t\t\t\t\t<image class=\"game-controlbtn-img preventLongpress\" src=\"../../static/imgs/rocker_right.png\"></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"gui-grids gui-flex gui-rows gui-wrap gui-margin-top\" style=\"margin-top: -25rpx;\">\r\n\t\t\t\t\t\t\t\t<view class=\"gui-grids-items gui-flex gui-columns gui-align-items-center\"></view>\r\n\t\t\t\t\t\t\t\t<view class=\"gui-grids-items gui-flex gui-columns gui-align-items-center\" @touchstart=\"opera(191)\" @touchend=\"opera(255)\" hover-class=\"btn-hover\">\r\n\t\t\t\t\t\t\t\t\t<image class=\"game-controlbtn-img preventLongpress\" src=\"../../static/imgs/rocker_down.png\"></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"gui-grids-items gui-flex gui-columns gui-align-items-center\"></view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view style=\"width: 240rpx;\">\r\n\t\t\t\t\t\t\t<view class=\"gui-flex gui-columns\" style=\"margin-top: 50rpx;\" @touchstart=\"opera(247)\">\r\n\t\t\t\t\t\t\t\t<view class=\"game-catchbtn-view\" hover-class=\"btn-hover\">\r\n\t\t\t\t\t\t\t\t\t<image class=\"game-catchbtn-img preventLongpress\" :src=\"status == 1 ? '../../static/imgs/game-xiazhua.png' : '../../static/imgs/game-result.png'\"></image>\r\n\t\t\t\t\t\t\t\t\t<text class=\"game-catchbtn-text\" v-show=\"status == 1\">{{countdownTime}}S</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t            <text class=\"gui-color-gray my-icons game-coinbtn-text\" style=\"margin-left: 50rpx;\">{{$store.state.user.coin}}币</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t\t\r\n\t\t\t<!-- 切换导航 -->\r\n\t\t\t<view class=\"gui-margin-top\" style=\"margin-left: 25rpx;\">\r\n\t\t\t\t<gui-switch-navigation :items=\"navItems\" lineHeight=\"60rpx\" :isCenter=\"true\" :size=\"200\" :activeFontWeight=\"900\"\r\n\t\t\t\t\tactiveLineBg=\"linear-gradient(to right, #FF7900, #FF7900)\" textAlign=\"center\" activeColor=\"#FF7900\" color=\"#a5a5a5\"\r\n\t\t\t\t\tactiveLineWidth=\"200rpx\" activeLineHeight=\"2rpx\" activeFontSize=\"30rpx\" :margin=\"10\" @change=\"navChange\">\r\n\t\t\t\t</gui-switch-navigation>\r\n\t\t\t</view>\r\n\t\t\t<!-- 详情 -->\r\n\t\t\t<view class=\"gui-margin-top\" v-if=\"active == 0\">\r\n\t\t\t\t<view class=\"gui-padding\" style=\"margin-bottom: 20rpx;\">\r\n\t\t\t\t\t<view class=\"gui-list-items\">\r\n\t\t\t\t\t\t<view class=\"gui-relative\">\r\n\t\t\t\t\t\t\t<image class=\"\" style=\"width: 150rpx;height: 150rpx;border-radius: 30rpx;\"\r\n\t\t\t\t\t\t\t:src=\"utils.formatImg(doll.thumbnail)\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"gui-list-body\">\r\n\t\t\t\t\t\t\t<view class=\"gui-flex gui-rows gui-nowrap gui-align-items-center\">\r\n\t\t\t\t\t\t\t    <text class=\"gui-text gui-color-gray\">娃娃名称</text>\r\n\t\t\t\t\t\t\t\t<text class=\"gui-text game-detail-text\" style=\"width: 320rpx;\">{{doll.name}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"gui-flex gui-rows gui-nowrap gui-align-items-center\">\r\n\t\t\t\t\t\t\t    <text class=\"gui-text gui-color-gray\">所需金币</text>\r\n\t\t\t\t\t\t\t\t<text class=\"gui-text game-detail-text\">{{doll.coin}}金币/次</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"gui-flex gui-rows gui-nowrap gui-align-items-center\">\r\n\t\t\t\t\t\t\t    <text class=\"gui-text gui-color-gray\">可兑积分</text>\r\n\t\t\t\t\t\t\t\t<text class=\"gui-text game-detail-text\">{{doll.exchangeJifen}}积分</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<image style=\"width:720rpx;\" :src=\"utils.formatImg(item)\" mode=\"widthFix\" v-for=\"(item,index) in doll.imgs\"\r\n\t\t\t\t\t:key=\"index\"></image>\r\n\t\t\t</view>\r\n\t\t\t<!-- 最近抓到的玩家 -->\r\n\t\t\t<view class=\"gui-padding gui-margin-top\" v-if=\"active == 1\">\r\n\t\t\t\t<list class=\"my-list\" scrollable=false>\r\n\t\t\t\t\t<cell v-for=\"(item,index) in catchRecords\" class=\"gui-list-items\">\r\n\t\t\t\t\t\t<view class=\"gui-list-image gui-relative\" @tap=\"navTo('/pages/user/recentCatch?user=' + encodeURIComponent(JSON.stringify(item)))\">\r\n\t\t\t\t\t\t\t<image class=\"gui-list-image\" :src=\"utils.formatImg(item.userIcon)\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"gui-list-body gui-border-b\" @tap=\"navTo('/pages/user/recentCatch?user=' + encodeURIComponent(JSON.stringify(item)))\">\r\n\t\t\t\t\t\t\t<view class=\"gui-list-title\">\r\n\t\t\t\t\t\t\t\t<text class=\"gui-list-title-text gui-primary-color\">{{item.userNick}}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"gui-list-title-desc gui-color-gray\">{{item.createTime}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"gui-list-body-desc gui-color-gray\">{{item.dollName}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text class=\"gui-list-arrow-right gui-icons gui-color-gray-light\" @tap=\"navTo('/pages/user/recentCatch?user=' + encodeURIComponent(JSON.stringify(item)))\">&#xe601;</text>\r\n\t\t\t\t\t</cell>\r\n\t\t\t\t</list>\r\n\t\t\t</view>\r\n\t\t\t<!-- 用户须知 -->\r\n\t\t\t<view class=\"gui-padding gui-margin-top\" v-if=\"active == 2\">\r\n\t\t\t\t<text class=\"gui-list-title-text gui-color-gray\">{{userNotice}}</text>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 居中弹出 -->\r\n\t\t\t<gui-popup ref=\"resultPopup\" :canCloseByShade=\"false\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<view v-if=\"showType==1\">\r\n\t\t\t\t\t\t<view class=\"gui-relative gui-box-shadow gui-img-in\">\r\n\t\t\t\t\t\t\t<gui-image src=\"/static/imgs/game_catch_success.png\" \r\n\t\t\t\t\t\t\t:width=\"580\"></gui-image>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view class=\"gui-relative\" style=\";left:150rpx;top: -430rpx;\">\r\n\t\t\t\t\t\t\t\t<image src=\"@/static/imgs/game_success_wawa_bg.png\" style=\"position: absolute;left: 0rpx;top: 0rpx;width: 300rpx;height: 300rpx;\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t\t\t<image class=\"rounded-lg m-1\" :src=\"utils.formatImg(doll.thumbnail)\" style=\"width: 270rpx;height: 270rpx;\" mode=\"\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view class=\"gui-relative\" style=\"height: 60rpx;left:150rpx;width: 300rpx; top: -400rpx;\">\r\n\t\t\t\t\t\t\t\t<view class=\"flex align-center justify-center py-1 px-2 rounded bg-warning\" @click=\"closeResultPopup();play()\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"font font-weight-bold text-white result-text\">再来一局</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"font font-weight-bold text-white result-text\">({{countdownTime}}s)</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- 关闭按钮 -->\r\n\t\t\t\t\t\t\t<text class=\"gui-block-text demo-close gui-icons gui-color-white gui-absolute-rt\"\r\n\t\t\t\t\t\t\t@tap.stop=\"closeResultPopup();cancalSubribe()\">&#xe78a;</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"showType==2\">\r\n\t\t\t\t\t\t<view class=\"gui-relative gui-box-shadow gui-img-in\">\r\n\t\t\t\t\t\t\t<gui-image src=\"/static/imgs/game_catch_fail.png\" \r\n\t\t\t\t\t\t\t:width=\"580\"></gui-image>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view class=\"gui-relative\" style=\"height: 60rpx;left:150rpx;width: 300rpx; top: -100rpx;\">\r\n\t\t\t\t\t\t\t\t<view class=\"flex align-center justify-center py-1 px-2 rounded bg-warning\" @click=\"closeResultPopup();play()\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"font font-weight-bold text-white result-text\">再来一局</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"font font-weight-bold text-white result-text\">({{countdownTime}}s)</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<text class=\"gui-block-text demo-close gui-icons gui-color-white gui-absolute-rt\"\r\n\t\t\t\t\t\t\t@tap.stop=\"closeResultPopup();cancalSubribe()\">&#xe78a;</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"showType==3\">\r\n\t\t\t\t\t\t<view class=\"gui-relative gui-box-shadow gui-img-in\">\r\n\t\t\t\t\t\t\t<gui-image src=\"/static/imgs/daoninle.png\" \r\n\t\t\t\t\t\t\t:width=\"580\"></gui-image>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view class=\"gui-relative\" style=\"height: 60rpx;left:380rpx; top: -200rpx;\">\r\n\t\t\t\t\t\t\t\t<text class=\"font font-weight-bold text-white\" style=\"font-size: 96rpx;\">{{countdownTime}}s</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view class=\"gui-relative\"\r\n\t\t\t\t\t\t\t style=\"height: 120rpx;left:150rpx;width: 300rpx; top: -300rpx;\" @click=\"closeResultPopup();play()\"></view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<text class=\"gui-block-text demo-close gui-icons gui-color-white gui-absolute-rt\"\r\n\t\t\t\t\t\t\t@tap.stop=\"closeResultPopup();cancalSubribe()\">&#xe78a;</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</gui-popup>\r\n\t\t</view>\r\n\t</gui-page>\r\n</template>\r\n<script>\r\nimport {mapMutations} from 'vuex';\r\nimport $utils from \"@/common/utils\";\r\nvar graceJS = require('@/GraceUI5/js/grace.js');\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcontrollPanelIndex : 0,\r\n\t\t\t// 切换导航\r\n\t\t\tnavItems: [{id: 0,name: '商品详情'}, {id: 1,name: '最近夹中的人'}, {id: 2,name: '用户须知'}],\r\n\t\t\tactive: 0,\r\n\t\t\tutils:$utils,\r\n\t\t\tmachineId: 0,\r\n\t\t\tname: '',\r\n\t\t\tstatus: '',\r\n\t\t\tplayer: null,\r\n\t\t\tviewers: [],\r\n\t\t\tsubscribers: [],\r\n\t\t\tsubscribeOpen: false,\r\n\t\t\tfaces: [],\r\n\t\t\tcollect: false,\r\n\t\t\tcatchRecords: [],\r\n\t\t\tcountdownTime: '',\r\n\t\t\tisSubscribe: false,\r\n\t\t\tsubscribeSort: 0,\r\n\t\t\texchangeJifen: '',\r\n\t\t\tuserNotice: '',\r\n\t\t\tvideo: '',\r\n\t\t\tvideoPlayer: null,\r\n\t\t\tshowInmachineAnimation: false,\r\n\t\t\toperToken: \"\",\r\n\t\t\toperUrl: \"\",\r\n\t\t\tlastCmd: 0,\r\n\t\t\tplaybtnType: 0,//0开始游戏 1预约游戏 2取消预约\r\n\t\t\tdoll: {\r\n\t\t\t\tid: 0,\r\n\t\t\t\tname: '',\r\n\t\t\t\tthumbnail: '',\r\n\t\t\t\tdetailImgs: '',\r\n\t\t\t\tcoin: 0,\r\n\t\t\t\timgs: []\r\n\t\t\t},\r\n\t\t\tshowType: ''\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tviewers: {\r\n\t\t\thandler(newViewers, oldViewers) {\r\n\t\t\t\tif (newViewers && newViewers.length > 0) {\r\n\t\t\t\t\tif(newViewers.length > 4){\r\n\t\t\t\t\t\tnewViewers = newViewers.slice(0,4)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.faces = [];\r\n\t\t\t\t\tnewViewers.forEach((item) => {\r\n\t\t\t\t\t\tthis.faces.push(this.utils.formatImg(item.icon));\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tplayer: {handler(newPlayer, oldPlayer) {}},\r\n\t\tsubscribers: {\r\n\t\t\thandler(newSubscribers, oldSubscribers) {\r\n\t\t\t\tlet subscribeSort = 0;\r\n\t\t\t\tlet isSubscribe = false;\r\n\t\t\t\tif (newSubscribers && newSubscribers.length > 0) {\r\n\t\t\t\t\tnewSubscribers.forEach((item,index) => {\r\n\t\t\t\t\t\tif(item.userName == this.$store.state.user.id){\r\n\t\t\t\t\t\t\tsubscribeSort = index;\r\n\t\t\t\t\t\t\tisSubscribe = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tthis.subscribeSort = subscribeSort;\r\n\t\t\t\tthis.isSubscribe = isSubscribe;\r\n\t\t\t}\r\n\t\t},\r\n\t\tstatus: {\r\n\t\t\thandler(newStatus, oldStatus) {\r\n\t\t\t\tif(newStatus != 0 && (this.player && this.player.userName == this.$store.state.user.id)){\r\n\t\t\t\t\tthis.controllPanelIndex = 1;\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.controllPanelIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonReady() {\r\n        // 监听返回按钮按键事件\r\n        /* plus.key.addEventListener(\"backbutton\",function(e){\r\n            uni.navigateBack();\r\n        },false); */\r\n\t},\r\n\t\r\n\tupdated() {\r\n\t\tif(!this.initStatus){\r\n\t\t\tthis.initStatus = true;\r\n\t\t\t// uni-app 会劫持canvas标签并替换为uni-canvas，无法赋予canvas标签id\r\n\t\t\t// 这里创建canvas元素，插入到view中\r\n\t\t\tlet cv = document.createElement(\"canvas\");\r\n\t\t\tcv.id = \"video1\"\r\n\t\t\tcv.style.cssText = \"width:100%;height:100%;background-color: black;border-radius: 20px;\";\r\n\t\t\tthis.$refs.videoView.$el.appendChild(cv);\r\n\t\t\t/* nnmw.load(()=>{\r\n\t\t\t\tthis.videoPlayer = new nnmw();\r\n\t\t\t\tthis.videoPlayer.setView(cv.id);\r\n\t\t\t\tthis.videoPlayer.setBufferTime(0);\r\n\t\t\t\tthis.videoPlayer.setScaleMode(0);\r\n\t\t\t\tthis.videoPlayer.start(this.video);\r\n\t\t\t\tthis.videoPlayer.on(\"start\", () => {\r\n\t\t\t\t\tthis.clearPlayVideoInterval();\r\n\t\t\t\t});\r\n\t\t\t}); */\r\n\t\t\t\r\n\t\t\tthis.videoPlayer = new NNM();\r\n\t\t\tthis.videoPlayer.setView(cv.id);\r\n\t\t\tthis.videoPlayer.setBufferTime(0);\r\n\t\t\tthis.videoPlayer.setScaleMode(0);\r\n\t\t\tthis.videoPlayer.start(this.video);\r\n\t\t\tthis.videoPlayer.on(\"start\", () => {\r\n\t\t\t\tthis.clearPlayVideoInterval();\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tonLoad(option) {\r\n\t\t// const machine = JSON.parse(option.machine);\r\n\t\t// this.machineId = machine.machineId;\r\n\t\t// this.video = machine.video;\r\n\t\t\r\n\t\tthis.machineId = option.machineId;\r\n\t\t\r\n\t\tthis.showInmachineAnimation = true;\r\n\t\tthis.getCatchSuccessRecent();\r\n\t\tthis.getUserNotice();\r\n\t\tthis.$store.dispatch('getUserInfo');\r\n\t},\r\n\tonHide() {\r\n\t\tthis.leaveRoom(this.machineId);\r\n\t\tthis.clearListener();\r\n\t},\r\n\tonShow() {\r\n\t\tthis.addListenerSocketSloginsuccess();\r\n\t\tif(!uni.http.isSocketConnected()){\r\n\t\t\tuni.$emit('socketdisconnect');\r\n\t\t}\r\n\t\tthis.listener();\r\n\t\tthis.loadMachine(this.machineId);\r\n\t\tthis.startVideo();\r\n\t},\r\n\tonUnload() {\r\n\t\tthis.clearInterval();\r\n\t\tthis.leaveRoom(this.machineId);\r\n\t\tthis.clearListener();\r\n\t\t\r\n\t\t// canvas 是由createElement每次创建，调用这个方法完全释放，避免16次之后WebGL出现警告\r\n\t\tthis.videoPlayer.release(true);\r\n\t},\r\n\tmethods: {\r\n\t\t...mapMutations(['setCurrentMachine']),\r\n\t\taddListenerSocketSloginsuccess(){\r\n\t\t\tuni.$once(\"socketSloginsuccess\",()=>{\r\n\t\t\t\tthis.listener();\r\n\t\t\t\tthis.loadMachine(this.machineId);\r\n\t\t\t\tthis.startVideo();\r\n\t\t\t\tthis.addListenerSocketSloginsuccess()\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync startVideo(){\r\n\t\t\t// this.$refs.webview.evalJs(\"start()\");\r\n\t\t\tthis.backgroundVoice();\r\n\t\t},\r\n\t\tasync stopVideo(){\r\n\t\t\t// this.$refs.webview.evalJs(\"stop()\");\r\n\t\t},\r\n\t\tvideoPostMessage:function(data){\r\n\t\t\tlet action = data.detail.data[0];\r\n\t\t\tif(action.action === \"onReady\"){\r\n\t\t\t\t// this.$refs.webview.evalJs(\"start()\");\r\n\t\t\t\tthis.backgroundVoice();\r\n\t\t\t}\r\n\t\t},\r\n\t\tlistener: function() {\r\n\t\t\t//倒计时结束\r\n\t\t\tuni.http.socketOn(10008, res => {\r\n\t\t\t\t// console.log(\"------------------------------PushGameStatus-------------------------------\");\r\n\t\t\t\tif(res.mid == this.machineId){\r\n\t\t\t\t\tthis.status = res.status;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//游戏开始\r\n\t\t\tuni.http.socketOn(10006, res => {\r\n\t\t\t\t// console.log(\"------------------------------PushGameStart-------------------------------\");\r\n\t\t\t\tif(res.mid == this.machineId){\r\n\t\t\t\t\tthis.player = res.player;\r\n\t\t\t\t\tthis.subscribers = res.subscribers;\r\n\t\t\t\t\tthis.status = res.status;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.isSubscribe && res.player && res.player.userName == this.$store.state.user.id && this.status == 0){\r\n\t\t\t\t\t\t//弹出预约玩家开始游戏的倒计时框\r\n\t\t\t\t\t\tthis.daoninleVoice();\r\n\t\t\t\t\t\tthis.popGameResult(3,Number(res.subscribeEndTime - this.utils.getLocalTimestamp() - this.$store.state.offsetTime));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//游戏结果\r\n\t\t\tuni.http.socketOn(10007, res => {\r\n\t\t\t\t// console.log(\"------------------------------PushGameResult-------------------------------\");\r\n\t\t\t\tif(res.mid == this.machineId){\r\n\t\t\t\t\tif(this.player && this.player.userName == this.$store.state.user.id){\r\n\t\t\t\t\t\tif(res.isWin == 1){\r\n\t\t\t\t\t\t\tthis.gameSuccessVoice();\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tthis.gameFailVoice();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.popGameResult(res.isWin == 1 ? 1 : 2,Number(res.subscribeEndTime - this.utils.getLocalTimestamp() - this.$store.state.offsetTime));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.status = 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//监听再来一局事件\r\n\t\t\t/* uni.$on('againplay',()=>{\r\n\t\t\t\tthis.play();\r\n\t\t\t}); */\r\n\t\t\t\r\n\t\t\t//监听取消开局事件\r\n\t\t\t/* uni.$on('cancalplay',()=>{\r\n\t\t\t\tthis.cancalSubribe();\r\n\t\t\t}) */\r\n\t\t},\r\n\t\tclearListener: function() {\r\n\t\t\tuni.http.clearSocket(10008);\r\n\t\t\tuni.http.clearSocket(10006);\r\n\t\t\tuni.http.clearSocket(10007);\r\n\t\t\tuni.$off('againplay')\r\n\t\t\tuni.$off('cancalplay')\r\n\t\t\tthis.backgroundVoiceStop();\r\n\t\t},\r\n\t\tcloseResultPopup() {\r\n\t\t\tthis.$refs.resultPopup.close();\r\n\t\t},\r\n\t\tpopGameResult:function(type,countdownTime){\r\n\t\t\tthis.showType = type;\r\n\t\t\tthis.clearInterval();\r\n\t\t\tthis.countdownTime = countdownTime;\r\n\t\t\tthis.timer = setInterval( () => {\r\n\t\t\t\tif(this.countdownTime > 0){\r\n\t\t\t\t\tthis.countdownTime --;\t\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.clearInterval();\r\n\t\t\t\t\tthis.closeResultPopup();\r\n\t\t\t\t}\r\n\t\t\t}, 1000)\r\n\t\t\tthis.$refs.resultPopup.open();\r\n\t\t},\r\n\t\tplay: function() {\r\n\t\t\t\r\n\t\t\tif(!this.subscribeOpen && this.player && this.player.userName != this.$store.state.user.id){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.isSubscribe){\r\n\t\t\t\tthis.btnVoice();\r\n\t\t\t    this.cancalSubribe();\r\n\t\t\t    return;\r\n\t\t\t}\r\n            \r\n\t\t\tif (this.$store.state.socket) {\r\n\t\t\t\t//开始游戏\r\n\t\t\t\tuni.http.socketReq(10004, {\r\n\t\t\t\t\t\"id\": this.machineId\r\n\t\t\t\t}, res => {\r\n\t\t\t\t\tif(res.msg){\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (res.rtnCode == 0) {\r\n\t\t\t\t\t\tthis.lastCmd = 0;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(res.isSubscribe && res.isSubscribe == 1){\r\n\t\t\t\t\t\t\tthis.btnVoice();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.readygoVoice();\r\n\t\t\t\t\t\tthis.operToken = res.operToken;\r\n\t\t\t\t\t\tthis.operUrl = res.operUrl;\r\n\t\t\t\t\t\tthis.$store.state.user.coin = res.coin;\r\n\t\t\t\t\t\tthis.setInterval(res.stopTime);\r\n\t\t\t\t\t}else if(res.rtnCode == 100){\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pages/money/recharge'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else if(res.rtnCode == 101){\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\turl:'../index/index'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t}else if(res.rtnCode == 102){//您正在游戏中\r\n\t\t\t\t\t}else if(res.rtnCode == 199){//操作过于频繁\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\topera: function(cmd) {\r\n\t\t\tif(this.status != 1 || !this.player || this.player.userName != this.$store.state.user.id || !this.operToken){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(cmd == 247){\r\n\t\t\t\tif(this.lastCmd == 0){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"请先移动爪子\",\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else if(this.lastCmd != 255){\r\n\t\t\t\t\tthis.lastCmd = 255;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(cmd != 255 && cmd != 247){\r\n\t\t\t\tthis.btnVoice();\r\n\t\t\t} \r\n\t\t\tif (this.$store.state.socket) {\r\n\t\t\t\t//操作游戏\r\n\t\t\t\t// uni.http.post(this.operUrl + \"/operate/cmd\",{\r\n\t\t\t\tuni.http.post(\"https://kdwwc.fszhuazhuale.com/facade/operate/cmd\",{\r\n\t\t\t\t\tcmd:cmd,\r\n\t\t\t\t\toperToken:this.operToken,\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tif(res.code == 200){\r\n\t\t\t\t\t\tthis.lastCmd = cmd;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(cmd === 247){\r\n\t\t\t\t\t\t\tthis.status = 2;\r\n\t\t\t\t\t\t\tthis.xiazhuaVoice();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else if(res.msg) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t/* uni.http.socketReq(10005, {\r\n\t\t\t\t\t\"mid\": this.machineId,\r\n\t\t\t\t\t\"cmd\": cmd\r\n\t\t\t\t}, res => {\r\n\t\t\t\t\tif(res.rtnCode == 0){\r\n\t\t\t\t\t\tif(cmd === 247){\r\n\t\t\t\t\t\t\tthis.status = 2;\r\n\t\t\t\t\t\t\tthis.xiazhuaVoice();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else if(res.msg) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}) */\r\n\t\t\t}\r\n\t\t},\r\n\t\tcancalSubribe() {\r\n\t\t\tif (this.$store.state.socket) {\r\n\t\t\t\t//取消预约\r\n\t\t\t\tuni.http.socketReq(10011, {\r\n\t\t\t\t\t\"id\": this.machineId\r\n\t\t\t\t}, res => {\r\n\t\t\t\t\tif(res.rtnCode != 0) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 导航切换\r\n\t\tnavChange: function(e) {\r\n\t\t\tthis.active = e;\r\n\t\t\t//最近夹中的人\r\n\t\t\tif (e == 1) {\r\n\t\t\t\tthis.getCatchSuccessRecent();\r\n\t\t\t}\r\n\t\t},\r\n\t\tnavTo(url){\r\n\t\t\tthis.btnVoice();\r\n\t\t\tuni.navigateTo({\r\n\t\t\t    url: url\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetCatchSuccessRecent(){\r\n\t\t\tuni.http.get(\r\n\t\t\t\t'machine/catchSuccessRecent?machineId=' + this.machineId\r\n\t\t\t).then(res => {\r\n\t\t\t\tthis.catchRecords = res.data.catchRecords || [];\r\n\t\t\t})\r\n\t\t},\r\n\t\tgetUserNotice(){\r\n\t\t\tuni.http.get(\r\n\t\t\t\t'article/3'\r\n\t\t\t).then(res => {\r\n\t\t\t\tif(res.code == 200){\r\n\t\t\t\t\tthis.userNotice = res.data.noticeContent;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t/* uni.http.get(\r\n\t\t\t\t'user/userNotice'\r\n\t\t\t).then(res => {\r\n\t\t\t\tthis.userNotice = res || '';\r\n\t\t\t}) */\r\n\t\t},\r\n\t\tcomplaint(){\r\n\t\t\tthis.btnVoice();\r\n\t\t\tuni.http.get(\r\n\t\t\t\t'user/complaintRecordByMachine/' + this.machineId\r\n\t\t\t).then(res => {\r\n\t\t\t\tif(res.code == 200 && res.data.complaintStatus == 0 && res.data.status == 0) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t    url: '/pages/complaint/complaint?record=' + encodeURIComponent(JSON.stringify(res.data))\r\n\t\t\t\t\t});\r\n\t\t\t\t}else {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t    url: '/pages/complaint/gameRecord'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tloadMachine(machineId) {\r\n\t\t\t/* try {\r\n\t\t\t    const value = uni.getStorageSync('machineId');\r\n\t\t\t    if (value) {\r\n\t\t\t        machineId = value;\r\n\t\t\t    }\r\n\t\t\t} catch (e) {} */\r\n\t\t\tif(machineId >= 0){\r\n\t\t\t\tmachineId = this.machineId;\r\n\t\t\t}else {\r\n\t\t\t\tthis.leaveRoom(this.machineId);\r\n\t\t\t\tthis.showInmachineAnimation = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(!machineId || machineId == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.$store.state.socket) {\r\n\t\t\t\tuni.http.socketReq(10001, {\r\n\t\t\t\t\t\"id\": machineId\r\n\t\t\t\t}, res => {\r\n\t\t\t\t\tif (res.rtnCode == 0) {\r\n\t\t\t\t\t\tthis.doll = res.machine.doll;\r\n\t\t\t\t\t\tif (this.doll && this.doll.detailImgs) {\r\n\t\t\t\t\t\t\tthis.doll.imgs = this.doll.detailImgs.split(\",\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// let data = {machineId: res.machine.id,video:res.machine.video}\r\n\t\t\t\t\t\t// this.setCurrentMachine(data)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.machineId = res.machine.id;\r\n\t\t\t\t\t\tthis.status = res.machine.status;\r\n\t\t\t\t\t\tthis.player = res.machine.player;\r\n\t\t\t\t\t\tthis.viewers = res.machine.viewers;\r\n\t\t\t\t\t\tthis.name = res.machine.name;\r\n\t\t\t\t\t\tthis.subscribers = res.machine.subscribers;\r\n\t\t\t\t\t\tthis.collect = res.machine.isCollect == 1;\r\n\t\t\t\t\t\tthis.subscribeOpen = res.subscribeOpen && res.subscribeOpen == 1;\r\n\t\t\t\t\t\tthis.operToken = res.operToken || \"\";\r\n\t\t\t\t\t\tthis.operUrl = res.machine.operUrl || \"\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet title = this.doll.name;\r\n\t\t\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\t\t\ttitle\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(res.machine.video && res.machine.video.indexOf(\"https\") == -1){\r\n\t\t\t\t\t\t\tres.machine.video = res.machine.video.replace(\"http\",\"https\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(this.video != res.machine.video){\r\n\t\t\t\t\t\t\tthis.video = res.machine.video;\r\n\t\t\t\t\t\t\tthis.videoPlayer.stop();\r\n\t\t\t\t\t\t\tthis.videoPlayer.clearView();\r\n\t\t\t\t\t\t\tthis.videoPlayer.start(res.machine.video);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.setPlayVideoInterval();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(this.status == 1 && this.player && this.player.userName == this.$store.state.user.id){\r\n\t\t\t\t\t\t\tthis.setInterval(res.machine.stopTime);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(this.showInmachineAnimation){\r\n\t\t\t\t\t\t\tuni.$emit(\"goInMachineAnimation\",this.doll);\r\n\t\t\t\t\t\t\tthis.showInmachineAnimation = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else if(res.rtnCode == 101){\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\turl:'../index/index'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tleaveRoom(machineId){\r\n\t\t\tif (this.$store.state.socket) {\r\n\t\t\t\tuni.http.socketReq(10002, {\r\n\t\t\t\t\t\"id\": machineId\r\n\t\t\t\t}, res => {\r\n\t\t\t\t\tconsole.log(\"leaveRoom\");\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tcollectMachine() {\r\n\t\t\tthis.btnVoice();\r\n\t\t\tuni.http.get(\r\n\t\t\t\t'user/collectMachine?machineId=' + this.machineId\r\n\t\t\t).then(res => {\r\n\t\t\t\tthis.collect = res.data;\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: this.collect ? '收藏成功' : '已取消收藏',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t},\r\n\t\tclearInterval(){\r\n\t\t\tif(this.timer) {\r\n\t\t\t\tclearInterval(this.timer);  \r\n\t\t\t\tthis.timer = null;  \r\n\t\t\t} \r\n\t\t},\r\n\t\tsetInterval(stopTime){\r\n\t\t\tthis.clearInterval();\r\n\t\t\tthis.countdownTime = Number(stopTime - this.utils.getLocalTimestamp() - this.$store.state.offsetTime);\r\n\t\t\tthis.timer = setInterval( () => {\r\n\t\t\t\tif(this.countdownTime > 0){\r\n\t\t\t\t\tthis.countdownTime --;\t\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.clearInterval();\r\n\t\t\t\t}\r\n\t\t\t}, 1000)\r\n\t\t},\r\n\t\tbackgroundVoice() {\r\n\t\t\tif(this.$store.state.gameSet.volume && this.machineId && this.machineId != 0){\r\n\t\t\t\t/* if(this.innerAudioContext){\r\n\t\t\t\t\tthis.innerAudioContext.destroy();\r\n\t\t\t\t}\r\n\t\t\t\tthis.innerAudioContext = uni.createInnerAudioContext();\r\n\t\t\t\tthis.innerAudioContext.autoplay = true;\r\n\t\t\t\tthis.innerAudioContext.loop = true;\r\n\t\t\t\tthis.innerAudioContext.src = './../../static/voice/background.mp3';\r\n\t\t\t\tthis.innerAudioContext.sessionCategory = \"ambient\";\r\n\t\t\t\tthis.innerAudioContext.onPlay(() => {\r\n\t\t\t\t  console.log('开始播放');\r\n\t\t\t\t});\r\n\t\t\t\tthis.innerAudioContext.onError((res) => {\r\n\t\t\t\t  console.log(res.errMsg);\r\n\t\t\t\t  console.log(res.errCode);\r\n\t\t\t\t}); */\r\n\t\t\t\t// this.$refs.webview.evalJs(\"backgroundVoice()\");\r\n\t\t\t\t\r\n\t\t\t\tbackgroundVoice();\r\n\t\t\t}\r\n\t\t} ,\r\n\t\tbackgroundVoiceStop(){\r\n\t\t\t/* if(this.innerAudioContext){\r\n\t\t\t\tthis.innerAudioContext.destroy();\r\n\t\t\t} */\r\n\t\t\t// this.$refs.webview.evalJs(\"backgroundVoiceStop()\");\r\n\t\t\tbackgroundVoiceStop();\r\n\t\t},\r\n\t\tbtnVoice() {\r\n\t\t\tif(this.$store.state.gameSet.volume){\r\n\t\t\t\t// this.$refs.webview.evalJs(\"caozuodianjiVoice()\");\r\n\t\t\t\tcaozuodianjiVoice();\r\n\t\t\t}\r\n\t\t} ,\r\n\t\txiazhuaVoice() {\r\n\t\t\tif(this.$store.state.gameSet.volume){\r\n\t\t\t\t// this.$refs.webview.evalJs(\"xiazhuaVoice()\");\r\n\t\t\t\txiazhuaVoice();\r\n\t\t\t}\r\n\t\t} ,\r\n\t\treadygoVoice() {\r\n\t\t\tif(this.$store.state.gameSet.volume){\r\n\t\t\t\t// this.$refs.webview.evalJs(\"readygoVoice()\");\r\n\t\t\t\treadygoVoice();\r\n\t\t\t}\r\n\t\t},\r\n\t\tgameSuccessVoice() {\r\n\t\t\tif(this.$store.state.gameSet.volume){\r\n\t\t\t\t// this.$refs.webview.evalJs(\"gameSuccessVoice()\");\r\n\t\t\t\tgameSuccessVoice();\r\n\t\t\t}\r\n\t\t},\r\n\t\tgameFailVoice() {\r\n\t\t\tif(this.$store.state.gameSet.volume){\r\n\t\t\t\t// this.$refs.webview.evalJs(\"gameFailVoice()\");\r\n\t\t\t\tgameFailVoice();\r\n\t\t\t}\r\n\t\t},\r\n\t\tdaoninleVoice() {\r\n\t\t\tif(this.$store.state.gameSet.volume){\r\n\t\t\t\t// this.$refs.webview.evalJs(\"daoninleVoice()\");\r\n\t\t\t\tdaoninleVoice();\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangeVolume() {\r\n\t\t\tthis.$store.state.gameSet.volume = !this.$store.state.gameSet.volume;\r\n\t\t\tif(this.$store.state.gameSet.volume){\r\n\t\t\t\tthis.backgroundVoice();\r\n\t\t\t\t// this.$refs.webview.evalJs(\"backgroundVoice()\");\r\n\t\t\t\tbackgroundVoice();\r\n\t\t\t}else {\r\n\t\t\t\tthis.backgroundVoiceStop();\r\n\t\t\t\t// this.$refs.webview.evalJs(\"backgroundVoiceStop()\");\r\n\t\t\t\tbackgroundVoiceStop();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetPlayVideoInterval() {\r\n\t\t\ttry{\r\n\t\t\t\tthis.clearPlayVideoInterval();\r\n\t\t\t\t\t\t\r\n\t\t\t\tlet i = 0;\r\n\t\t\t\tthis.playVideoTimer = setInterval(() => {\r\n\t\t\t\t\ti++;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.videoPlayer.stop();\r\n\t\t\t\t\tthis.videoPlayer.clearView();\r\n\t\t\t\t\tthis.videoPlayer.start(this.video);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (i == 30) {\r\n\t\t\t\t\t\tthis.clearPlayVideoInterval();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 500)\r\n\t\t\t}catch(e){\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tclearPlayVideoInterval() {\r\n\t\t\tif (this.playVideoTimer) {\r\n\t\t\t\tclearInterval(this.playVideoTimer);\r\n\t\t\t\tthis.playVideoTimer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n\t.modal-btns {line-height: 88rpx;font-size: 26rpx;text-align: center;width: 200rpx;}\r\n\t.gui-grids-items {width: 120rpx;}\r\n\t.demo{width:350rpx; margin:10rpx;}\r\n\t.button{width:90rpx; height:90rpx; border-radius:8rpx; margin:10rpx;}\r\n\t.button-text{font-size:38rpx; text-align:center; line-height:90rpx;}\r\n\t.face-image {height: 50rpx;width: 50rpx;border-radius:50rpx;}\r\n\t.gui-badge{border-radius:38rpx; height:38rpx; line-height:38rpx;  font-size:22rpx;margin-left: -10rpx;}\r\n\t\r\n\t.game-title{width:350rpx; height:50rpx;margin-left: -50rpx;margin-right: 30rpx;font-size: 32rpx;}\r\n\t.game-text-margin{margin: 10rpx 10rpx;}\r\n\t.game-body{border: 5rpx;border-color: #ffffff;border-radius: 40rpx;background-color: #ffffff;}\r\n\t.game-webview{width: 695rpx;position: relative;margin: 10rpx;}\r\n\t.game-info{height: 60rpx;}\r\n\t/* .game-viewer{margin-top: 0rpx;margin-bottom: -10rpx;} */\r\n\t.game-player{position: absolute;left: 35rpx; width: 320rpx;height: 60rpx;top:40rpx;}\r\n\t.game-player-item{height: 80rpx;width:80rpx;border-radius:80rpx;opacity: 0.9;}\r\n\t.game-viewer{position: absolute;right: 35rpx; height: 60rpx;top:40rpx;}\r\n\t.game-viewer-item{height: 60rpx;width:60rpx;border-radius:60rpx;opacity: 0.8;}\r\n\t.game-roomname{position: absolute;left: 35rpx;width: 180rpx;height: 40rpx;}\r\n\t.game-roomname-text{font-size: 26rpx;color: #d6d6d6;}\r\n\t.game-collectbtn-border{width: 140rpx;height:120rpx;border-radius: 50rpx;padding: 15rpx;background-color: #e6e6e6;margin-left: 10rpx;margin-right: 10rpx;}\r\n\t.game-collectbtn-inner{width: 110rpx;height:100rpx;border-radius: 40rpx;background-color: #ffffff;}\r\n\t.game-coinbtn-border{width: 160rpx;height:120rpx;border-radius: 50rpx;padding: 10rpx;}\r\n\t.game-playbtn-view{width: 300rpx;height:120rpx;}\r\n\t.game-playbtn-text{position: absolute;bottom: 85rpx;left:210rpx; text-align: center;width: 300rpx;font-size: 24rpx;color: #e3e3e3;}\r\n\t.game-playbtn-img{width: 300rpx;height:120rpx}\r\n\t.game-controlbtn-img{width: 90rpx;height:90rpx}\r\n\t.game-catchbtn-view{width: 200rpx;height:150rpx;}\r\n\t.game-catchbtn-text{position: absolute;top: 90rpx;left:530rpx; text-align: center;width: 140rpx;font-size: 42rpx;color: #ffffff;font-weight: bold;}\r\n\t.game-catchbtn-img{width: 200rpx;height:150rpx}\r\n\t.game-coinbtn-text{font-size: 30rpx;line-height:35rpx; text-align:center;}\r\n\t.game-rechargebtn{border-radius: 25rpx;}\r\n\t.game-rechargebtn-text{padding-right:10rpx;font-size: 30rpx;}\r\n\t.game-detail-text{margin-left:60rpx;color: #626262;}\r\n\t.game-control-view{width: 430rpx;}\r\n\t.tool-bar{position: absolute;right: 30rpx;width: 80rpx;height: 300rpx; background-color: rgba(83, 83, 83, 0.3);border-top-left-radius: 40rpx;border-bottom-left-radius: 40rpx;opacity: 0.6;}\r\n\t.tool-bar-item{width: 50rpx;height: 50rpx;margin-left: 15rpx;margin-top: 30rpx;}\r\n\t.btn-hover{opacity:0.3}\r\n\t\r\n\t.demo-close{width:100rpx; height:100rpx; line-height:100rpx; opacity:0.88; text-align:center; font-size:58rpx;}\r\n\t\r\n\t.preventLongpress {pointer-events: none;}\r\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./game.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./game.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1711787380661\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}